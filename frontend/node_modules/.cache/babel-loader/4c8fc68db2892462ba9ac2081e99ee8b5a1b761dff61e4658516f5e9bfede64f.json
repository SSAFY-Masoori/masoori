{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SSAFY\\\\Desktop\\\\S09P22B308\\\\frontend\\\\src\\\\pages\\\\main\\\\index.jsx\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport * as THREE from \"three\";\nimport Flickity from \"flickity\";\nimport \"flickity/css/flickity.css\"; // Import Flickity CSS\nimport \"./style.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { useUserInfo } from \"@/apis/menu/Queries/useUserInfo\";\n// import { userInfoState, userLoginState } from \"@/states/userState\";\nimport money from \"../../assets/img/mainLogo/money.png\";\nimport dictionary from \"../../assets/img/mainLogo/dictionary.jpg\";\nimport masooriStory from \"../../assets/img/mainLogo/masooriStory.jpg\";\nimport spendtarot from \"../../assets/img/mainLogo/spendtarot.jpg\";\nimport { toast } from \"react-toastify\";\nimport VerifyNumberModal from \"@/components/verifyNumberModal\";\nimport { useRecoilState } from \"recoil\";\nimport { nowDateInfoState } from \"@/states/spendState\";\nimport { useGetConsumeRecent } from \"@/apis/spend/Queries/useGetConsumeRecent\";\nimport { spendIdState, specialIdState } from \"@/states/dictionaryState\";\nimport { modalOpenState } from \"@/states/userState\";\nimport { usePostConsume } from \"@/apis/main/Mutations/usePostConsume\";\n\n//verifymodal\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Backdrop = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.8); /* Semi-transparent black background */\n  display: ${props => props.isOpen ? \"block\" : \"none\"};\n  z-index: 1;\n`;\n_c = Backdrop;\nconst ModalContainer = styled.div`\n  position: fixed;\n  top: 23%;\n  left: 40%;\n  transform: translate(-50%, -50%);\n  padding: 20px;\n  display: ${props => props.isOpen ? \"block\" : \"none\"};\n  z-index: 3;\n`;\n_c2 = ModalContainer;\nconst MainPage = () => {\n  _s();\n  const navigate = useNavigate();\n  const canvasRef = useRef(null); // Ref to store the canvas element\n  // 로그인 사용자 userInfo:isAuthenticated 체크\n  const [spendId, setSpendId] = useRecoilState(spendIdState);\n  const [nowDateInfo, setNowDateInfo] = useRecoilState(nowDateInfoState);\n  const [isLogin, setIsLogin] = useState(\"\");\n  const [isAuth, setIsAuth] = useState(false);\n  const [specialId, setSpecialId] = useRecoilState(specialIdState);\n  let body,\n    mainContainer,\n    scene,\n    renderer,\n    camera,\n    windowWidth,\n    windowHeight,\n    windowHalfWidth,\n    windowHalfHeight,\n    mouseX = 0,\n    mouseY = 0,\n    graphics,\n    currentGraphic = 0,\n    graphicCanvas,\n    gctx,\n    graphicPixels;\n  const cameraLookAt = new THREE.Vector3(0, 0, 0),\n    cameraTarget = new THREE.Vector3(0, 0, 800),\n    colors = [\"#F9DFAD\", \"#FFC56E\", \"#F96893\", \"#FFFFFF\", \"#FFC56E\"],\n    canvasWidth = 260,\n    canvasHeight = 260,\n    particles = [],\n    graphicOffsetX = canvasWidth / 2,\n    graphicOffsetY = canvasHeight / 4;\n  useEffect(() => {\n    const initStage = () => {\n      body = document.querySelector(\".body\");\n      mainContainer = document.querySelector(\"#main\");\n      setWindowSize();\n      window.addEventListener(\"resize\", onWindowResize, false);\n      window.addEventListener(\"mousemove\", onMouseMove, false);\n    };\n    const initScene = () => {\n      scene = new THREE.Scene();\n      renderer = new THREE.WebGLRenderer({\n        alpha: true,\n        antialias: true,\n        canvas: canvasRef.current // Use the canvas element from the ref\n      });\n\n      renderer.setPixelRatio(window.devicePixelRatio);\n      renderer.setSize(windowWidth, windowHeight);\n      mainContainer.appendChild(renderer.domElement);\n      scene.background = new THREE.Color(0x4d3548);\n    };\n    const initCamera = () => {\n      const fieldOfView = 75;\n      const aspectRatio = windowWidth / windowHeight;\n      const nearPlane = 1;\n      const farPlane = 3000;\n      camera = new THREE.PerspectiveCamera(fieldOfView, aspectRatio, nearPlane, farPlane);\n      camera.position.z = 800;\n    };\n    const initCanvas = () => {\n      graphicCanvas = document.createElement(\"canvas\");\n      graphicCanvas.width = canvasWidth;\n      graphicCanvas.height = canvasHeight;\n      gctx = graphicCanvas.getContext(\"2d\");\n      graphics = document.querySelectorAll(\".intro-cell > img\");\n    };\n    function Particle(graphicPixels) {\n      this.graphicPixels = graphicPixels; // Store graphicPixels array\n      this.vx = Math.random() * 0.05;\n      this.vy = Math.random() * 0.05;\n    }\n    Particle.prototype.init = function (i) {\n      const particle = new THREE.Object3D();\n      const geometryCore = new THREE.SphereGeometry(2, 4, 4);\n      const materialCore = new THREE.MeshBasicMaterial({\n        color: colors[i % colors.length]\n      });\n      const box = new THREE.Mesh(geometryCore, materialCore);\n      const pos = getGraphicPos(graphicPixels[i]);\n      particle.targetPosition = new THREE.Vector3(pos.x, pos.y, pos.z);\n      particle.position.set(windowWidth * 0.5, windowHeight * 0.5, -10 * Math.random() + 20);\n      randomPos(particle.position);\n\n      // Modifying vertices for BufferGeometry\n      const positions = box.geometry.getAttribute(\"position\").array;\n      for (let i = 0; i < positions.length; i += 3) {\n        positions[i] += -2 + Math.random() * 4; // x\n        positions[i + 1] += -2 + Math.random() * 4; // y\n        positions[i + 2] += -2 + Math.random() * 4; // z\n      }\n\n      box.geometry.getAttribute(\"position\").needsUpdate = true;\n      particle.add(box);\n      this.particle = particle;\n    };\n    Particle.prototype.updateRotation = function () {\n      this.particle.rotation.x += this.vx;\n      this.particle.rotation.y += this.vy;\n    };\n    Particle.prototype.updatePosition = function () {\n      this.particle.position.lerp(this.particle.targetPosition, 0.1);\n    };\n    const updateParticles = () => {\n      for (let i = 0, l = particles.length; i < l; i++) {\n        particles[i].updateRotation();\n        particles[i].updatePosition();\n      }\n    };\n    const getGraphicPos = pixel => {\n      const posX = (pixel.x - graphicOffsetX - Math.random() * 4 - 2) * 3;\n      const posY = (pixel.y - graphicOffsetY - Math.random() * 4 - 2) * 3;\n      const posZ = -20 * Math.random() + 40;\n      return {\n        x: posX,\n        y: posY,\n        z: posZ\n      };\n    };\n    const setParticles = () => {\n      const maxParticles = 3000; // Change this to the desired number of particles\n\n      for (let i = 0; i < graphicPixels.length && i < maxParticles; i++) {\n        if (particles[i]) {\n          const pos = getGraphicPos(graphicPixels[i]);\n          particles[i].particle.targetPosition.x = pos.x;\n          particles[i].particle.targetPosition.y = pos.y;\n          particles[i].particle.targetPosition.z = pos.z;\n        } else {\n          const p = new Particle();\n          p.init(i);\n          scene.add(p.particle);\n          particles[i] = p;\n        }\n      }\n      for (let i = graphicPixels.length; i < particles.length; i++) {\n        randomPos(particles[i].particle.targetPosition, true);\n      }\n      console.log(\"Total Particles: \" + particles.length);\n    };\n    const randomPos = (vector, outFrame = false) => {\n      const radius = outFrame ? windowWidth * 2 : windowWidth * -2;\n      const centerX = 0;\n      const centerY = 0;\n      const r = windowWidth + radius * Math.random();\n      const angle = Math.random() * Math.PI * 2;\n      vector.x = centerX + r * Math.cos(angle);\n      vector.y = centerY + r * Math.sin(angle);\n      vector.z = Math.random() * windowWidth;\n    };\n    const updateGraphic = () => {\n      const img = graphics[currentGraphic];\n      gctx.drawImage(img, 0, 0, canvasWidth, canvasHeight);\n      const gData = gctx.getImageData(0, 0, canvasWidth, canvasHeight).data;\n      graphicPixels = [];\n      for (let i = gData.length; i >= 0; i -= 4) {\n        if (gData[i] === 0) {\n          const x = i / 4 % canvasWidth;\n          const y = canvasHeight - Math.floor(Math.floor(i / canvasWidth) / 4);\n          if (x && x % 2 === 0 && y && y % 2 === 0) {\n            graphicPixels.push({\n              x: x,\n              y: y\n            });\n          }\n        }\n      }\n      for (let i = 0; i < particles.length; i++) {\n        randomPos(particles[i].particle.targetPosition);\n      }\n      setTimeout(() => {\n        setParticles();\n      }, 500);\n    };\n    const initBgObjects = () => {\n      for (let i = 0; i < 40; i++) {\n        createBgObject(i);\n      }\n    };\n    const createBgObject = i => {\n      const geometry = new THREE.SphereGeometry(10, 6, 6);\n      const material = new THREE.MeshBasicMaterial({\n        color: 0xffffff\n      });\n      const sphere = new THREE.Mesh(geometry, material);\n      scene.add(sphere);\n      const x = Math.random() * windowWidth * 2 - windowWidth;\n      const y = Math.random() * windowHeight * 2 - windowHeight;\n      const z = Math.random() * -2000 - 200;\n      sphere.position.set(x, y, z);\n    };\n    const initSlider = () => {\n      const elem = document.querySelector(\".intro-carousel\");\n      const flkty = new Flickity(elem, {\n        cellAlign: \"center\",\n        contain: true,\n        pageDots: false,\n        wrapAround: true,\n        resize: true,\n        arrowShape: {\n          x0: 10,\n          x1: 60,\n          y1: 50,\n          x2: 70,\n          y2: 40,\n          x3: 30\n        }\n      });\n      const listener = () => {\n        currentGraphic = flkty.selectedIndex;\n        updateGraphic();\n        console.log(flkty.selectedIndex);\n      };\n      flkty.on(\"select\", listener);\n    };\n    const onMouseMove = event => {\n      mouseX = event.clientX - windowHalfWidth;\n      mouseY = event.clientY - windowHalfHeight;\n      cameraTarget.x = Number(-mouseX) / 2;\n      cameraTarget.y = mouseY / 2;\n    };\n    const onWindowResize = () => {\n      setWindowSize();\n      camera.aspect = windowWidth / windowHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(windowWidth, windowHeight);\n    };\n    const setWindowSize = () => {\n      windowWidth = window.innerWidth;\n      windowHeight = window.innerHeight;\n      windowHalfWidth = windowWidth / 3;\n      windowHalfHeight = windowHeight / 2;\n    };\n    const animate = () => {\n      requestAnimationFrame(animate);\n      updateParticles();\n      camera.position.lerp(cameraTarget, 0.2);\n      camera.lookAt(cameraLookAt);\n      render();\n    };\n    const render = () => {\n      renderer.render(scene, camera);\n    };\n    const areAllImagesLoaded = () => {\n      const images = document.querySelectorAll(\".intro-cell > img\");\n      for (const img of images) {\n        if (!img.complete) {\n          return false;\n        }\n      }\n      return true;\n    };\n    const initAll = () => {\n      initStage();\n      initScene();\n      initCanvas();\n      initCamera();\n      initSlider();\n      initBgObjects();\n      updateGraphic();\n      animate();\n      initParticles(); // 파티클 초기화 함수를 호출합니다.\n    };\n\n    if (areAllImagesLoaded()) {\n      initAll();\n    } else {\n      const images = document.querySelectorAll(\".intro-cell > img\");\n      let loadedImagesCount = 0;\n      images.forEach(img => {\n        img.addEventListener(\"load\", () => {\n          loadedImagesCount++;\n          if (loadedImagesCount === images.length) {\n            initAll();\n          }\n        });\n      });\n    }\n\n    // Cleanup function\n    return () => {\n      // 이전에 생성된 파티클을 제거합니다.\n      for (let i = 0; i < particles.length; i++) {\n        scene.remove(particles[i].particle);\n      }\n      particles = [];\n      window.removeEventListener(\"resize\", onWindowResize);\n      window.removeEventListener(\"mousemove\", onMouseMove);\n    };\n  }, []);\n\n  //modal\n  const [isVerifyModalOpen, setIsVerifyModalOpen] = useState(false); // 모달 열림 여부 상태\n  const [isModalOpen, setIsModalOpen] = useRecoilState(modalOpenState);\n\n  //navigation\n  const navigateAbout = () => {\n    navigate(\"/landing\");\n  };\n  const navigateLuck = () => {\n    if (isLogin === \"true\") {\n      navigate(\"/userluck\");\n    } else {\n      toast.info(\"비로그인 시 카드 저장 불가\");\n      setTimeout(() => {\n        navigate(\"/luck\");\n      }, 2000);\n    }\n  };\n  const navigateAboutStory = () => {\n    navigate(\"/aboutStory\");\n  };\n  const navigateSpend = () => {\n    if (isLogin === \"true\") {\n      navigate(\"/spend\");\n    } else {\n      toast.info(\"비로그인 시 가계부 저장 불가\");\n      setTimeout(() => {\n        navigate(\"/spend\");\n      }, 2000);\n    }\n  };\n  const navigateTarot = () => {\n    navigate(\"/tarot\");\n  };\n  const navigateMain = () => {\n    navigate(\"/\");\n  };\n\n  //modal\n  const openVerifyModal = () => {\n    setIsVerifyModalOpen(true);\n  };\n  const closeVerifyModal = () => {\n    setIsVerifyModalOpen(false);\n  };\n\n  // 로그인 정보 가져오기\n  const {\n    data,\n    error,\n    isLoading\n  } = useUserInfo();\n  useEffect(() => {\n    if (data) {\n      if (data.isAuthenticated) {\n        setIsLogin(\"true\");\n        setIsAuth(true);\n      } else {\n        setIsLogin(\"false\");\n        setIsAuth(false);\n      }\n    }\n  }, [data]);\n\n  //파티클\n  const [part, setPart] = useState(\"\");\n  useEffect(() => {\n    setPart(particles);\n  }, [particles]);\n\n  //Verify\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"main\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"intro-section\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"intro-carousel\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"intro-cell\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: money,\n              alt: \"money\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"intro-cell\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: dictionary,\n              alt: \"dictionary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"intro-cell\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: masooriStory,\n              alt: \"masooriStory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"intro-cell\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: spendtarot,\n              alt: \"spendtarot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"home-section\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"home-menu\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: navigateAbout,\n            className: \"home-menu-button\",\n            children: \"\\uC815\\uBCF4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: navigateAboutStory,\n            className: \"home-menu-button\",\n            children: \"\\uB9C8\\uC218\\uB9AC \\uC774\\uC57C\\uAE30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: navigateLuck,\n            className: \"home-menu-button\",\n            children: \"\\uCE74\\uB4DC \\uC77D\\uAE30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: navigateSpend,\n            className: \"home-menu-button\",\n            children: \"\\uAC00\\uACC4\\uBD80 \\uAE30\\uB85D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: navigateTarot,\n            className: \"home-menu-button\",\n            children: \"\\uD0C0\\uB85C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: navigateMain,\n            className: \"home-menu-button\",\n            children: \"\\uD648\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"home-menu2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"home-menu\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: openVerifyModal,\n            className: \"home-menu-button\",\n            children: \"\\uBCF8\\uC778 \\uC778\\uC99D\\uD558\\uAE30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Backdrop, {\n      isOpen: isVerifyModalOpen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 513,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ModalContainer, {\n      isOpen: isVerifyModalOpen,\n      children: /*#__PURE__*/_jsxDEV(VerifyNumberModal, {\n        onClose: closeVerifyModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 514,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 464,\n    columnNumber: 5\n  }, this);\n};\n_s(MainPage, \"j3xGWp5l7sAzALBqmd5NEDODFrA=\", false, function () {\n  return [useNavigate, useRecoilState, useRecoilState, useRecoilState, useRecoilState, useUserInfo];\n});\n_c3 = MainPage;\nexport default MainPage;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Backdrop\");\n$RefreshReg$(_c2, \"ModalContainer\");\n$RefreshReg$(_c3, \"MainPage\");","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","useState","THREE","Flickity","useNavigate","styled","useUserInfo","money","dictionary","masooriStory","spendtarot","toast","VerifyNumberModal","useRecoilState","nowDateInfoState","useGetConsumeRecent","spendIdState","specialIdState","modalOpenState","usePostConsume","jsxDEV","_jsxDEV","Backdrop","div","props","isOpen","_c","ModalContainer","_c2","MainPage","_s","navigate","canvasRef","spendId","setSpendId","nowDateInfo","setNowDateInfo","isLogin","setIsLogin","isAuth","setIsAuth","specialId","setSpecialId","body","mainContainer","scene","renderer","camera","windowWidth","windowHeight","windowHalfWidth","windowHalfHeight","mouseX","mouseY","graphics","currentGraphic","graphicCanvas","gctx","graphicPixels","cameraLookAt","Vector3","cameraTarget","colors","canvasWidth","canvasHeight","particles","graphicOffsetX","graphicOffsetY","initStage","document","querySelector","setWindowSize","window","addEventListener","onWindowResize","onMouseMove","initScene","Scene","WebGLRenderer","alpha","antialias","canvas","current","setPixelRatio","devicePixelRatio","setSize","appendChild","domElement","background","Color","initCamera","fieldOfView","aspectRatio","nearPlane","farPlane","PerspectiveCamera","position","z","initCanvas","createElement","width","height","getContext","querySelectorAll","Particle","vx","Math","random","vy","prototype","init","i","particle","Object3D","geometryCore","SphereGeometry","materialCore","MeshBasicMaterial","color","length","box","Mesh","pos","getGraphicPos","targetPosition","x","y","set","randomPos","positions","geometry","getAttribute","array","needsUpdate","add","updateRotation","rotation","updatePosition","lerp","updateParticles","l","pixel","posX","posY","posZ","setParticles","maxParticles","p","console","log","vector","outFrame","radius","centerX","centerY","r","angle","PI","cos","sin","updateGraphic","img","drawImage","gData","getImageData","data","floor","push","setTimeout","initBgObjects","createBgObject","material","sphere","initSlider","elem","flkty","cellAlign","contain","pageDots","wrapAround","resize","arrowShape","x0","x1","y1","x2","y2","x3","listener","selectedIndex","on","event","clientX","clientY","Number","aspect","updateProjectionMatrix","innerWidth","innerHeight","animate","requestAnimationFrame","lookAt","render","areAllImagesLoaded","images","complete","initAll","initParticles","loadedImagesCount","forEach","remove","removeEventListener","isVerifyModalOpen","setIsVerifyModalOpen","isModalOpen","setIsModalOpen","navigateAbout","navigateLuck","info","navigateAboutStory","navigateSpend","navigateTarot","navigateMain","openVerifyModal","closeVerifyModal","error","isLoading","isAuthenticated","part","setPart","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","id","className","src","alt","onClick","onClose","_c3","$RefreshReg$"],"sources":["C:/Users/SSAFY/Desktop/S09P22B308/frontend/src/pages/main/index.jsx"],"sourcesContent":["import React, {\r\n  useCallback,\r\n  useEffect,\r\n  useMemo,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport * as THREE from \"three\";\r\nimport Flickity from \"flickity\";\r\nimport \"flickity/css/flickity.css\"; // Import Flickity CSS\r\nimport \"./style.css\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { useUserInfo } from \"@/apis/menu/Queries/useUserInfo\";\r\n// import { userInfoState, userLoginState } from \"@/states/userState\";\r\nimport money from \"../../assets/img/mainLogo/money.png\";\r\nimport dictionary from \"../../assets/img/mainLogo/dictionary.jpg\";\r\nimport masooriStory from \"../../assets/img/mainLogo/masooriStory.jpg\";\r\nimport spendtarot from \"../../assets/img/mainLogo/spendtarot.jpg\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport VerifyNumberModal from \"@/components/verifyNumberModal\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { nowDateInfoState } from \"@/states/spendState\";\r\nimport { useGetConsumeRecent } from \"@/apis/spend/Queries/useGetConsumeRecent\";\r\nimport { spendIdState, specialIdState } from \"@/states/dictionaryState\";\r\nimport { modalOpenState } from \"@/states/userState\";\r\nimport { usePostConsume } from \"@/apis/main/Mutations/usePostConsume\";\r\n\r\n//verifymodal\r\n\r\nconst Backdrop = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.8); /* Semi-transparent black background */\r\n  display: ${(props) => (props.isOpen ? \"block\" : \"none\")};\r\n  z-index: 1;\r\n`;\r\n\r\nconst ModalContainer = styled.div`\r\n  position: fixed;\r\n  top: 23%;\r\n  left: 40%;\r\n  transform: translate(-50%, -50%);\r\n  padding: 20px;\r\n  display: ${(props) => (props.isOpen ? \"block\" : \"none\")};\r\n  z-index: 3;\r\n`;\r\n\r\nconst MainPage = () => {\r\n  const navigate = useNavigate();\r\n  const canvasRef = useRef(null); // Ref to store the canvas element\r\n  // 로그인 사용자 userInfo:isAuthenticated 체크\r\n  const [spendId, setSpendId] = useRecoilState(spendIdState);\r\n\r\n  const [nowDateInfo, setNowDateInfo] = useRecoilState(nowDateInfoState);\r\n  const [isLogin, setIsLogin] = useState(\"\");\r\n  const [isAuth, setIsAuth] = useState(false);\r\n  const [specialId, setSpecialId] = useRecoilState(specialIdState);\r\n\r\n  let body,\r\n    mainContainer,\r\n    scene,\r\n    renderer,\r\n    camera,\r\n    windowWidth,\r\n    windowHeight,\r\n    windowHalfWidth,\r\n    windowHalfHeight,\r\n    mouseX = 0,\r\n    mouseY = 0,\r\n    graphics,\r\n    currentGraphic = 0,\r\n    graphicCanvas,\r\n    gctx,\r\n    graphicPixels;\r\n  const cameraLookAt = new THREE.Vector3(0, 0, 0),\r\n    cameraTarget = new THREE.Vector3(0, 0, 800),\r\n    colors = [\"#F9DFAD\", \"#FFC56E\", \"#F96893\", \"#FFFFFF\", \"#FFC56E\"],\r\n    canvasWidth = 260,\r\n    canvasHeight = 260,\r\n    particles = [],\r\n    graphicOffsetX = canvasWidth / 2,\r\n    graphicOffsetY = canvasHeight / 4;\r\n\r\n  useEffect(() => {\r\n    const initStage = () => {\r\n      body = document.querySelector(\".body\");\r\n      mainContainer = document.querySelector(\"#main\");\r\n      setWindowSize();\r\n      window.addEventListener(\"resize\", onWindowResize, false);\r\n      window.addEventListener(\"mousemove\", onMouseMove, false);\r\n    };\r\n\r\n    const initScene = () => {\r\n      scene = new THREE.Scene();\r\n      renderer = new THREE.WebGLRenderer({\r\n        alpha: true,\r\n        antialias: true,\r\n        canvas: canvasRef.current, // Use the canvas element from the ref\r\n      });\r\n      renderer.setPixelRatio(window.devicePixelRatio);\r\n      renderer.setSize(windowWidth, windowHeight);\r\n      mainContainer.appendChild(renderer.domElement);\r\n      scene.background = new THREE.Color(0x4d3548);\r\n    };\r\n\r\n    const initCamera = () => {\r\n      const fieldOfView = 75;\r\n      const aspectRatio = windowWidth / windowHeight;\r\n      const nearPlane = 1;\r\n      const farPlane = 3000;\r\n      camera = new THREE.PerspectiveCamera(\r\n        fieldOfView,\r\n        aspectRatio,\r\n        nearPlane,\r\n        farPlane\r\n      );\r\n      camera.position.z = 800;\r\n    };\r\n\r\n    const initCanvas = () => {\r\n      graphicCanvas = document.createElement(\"canvas\");\r\n      graphicCanvas.width = canvasWidth;\r\n      graphicCanvas.height = canvasHeight;\r\n      gctx = graphicCanvas.getContext(\"2d\");\r\n      graphics = document.querySelectorAll(\".intro-cell > img\");\r\n    };\r\n\r\n    function Particle(graphicPixels) {\r\n      this.graphicPixels = graphicPixels; // Store graphicPixels array\r\n      this.vx = Math.random() * 0.05;\r\n      this.vy = Math.random() * 0.05;\r\n    }\r\n\r\n    Particle.prototype.init = function (i) {\r\n      const particle = new THREE.Object3D();\r\n      const geometryCore = new THREE.SphereGeometry(2, 4, 4);\r\n      const materialCore = new THREE.MeshBasicMaterial({\r\n        color: colors[i % colors.length],\r\n      });\r\n\r\n      const box = new THREE.Mesh(geometryCore, materialCore);\r\n\r\n      const pos = getGraphicPos(graphicPixels[i]);\r\n      particle.targetPosition = new THREE.Vector3(pos.x, pos.y, pos.z);\r\n\r\n      particle.position.set(\r\n        windowWidth * 0.5,\r\n        windowHeight * 0.5,\r\n        -10 * Math.random() + 20\r\n      );\r\n      randomPos(particle.position);\r\n\r\n      // Modifying vertices for BufferGeometry\r\n      const positions = box.geometry.getAttribute(\"position\").array;\r\n      for (let i = 0; i < positions.length; i += 3) {\r\n        positions[i] += -2 + Math.random() * 4; // x\r\n        positions[i + 1] += -2 + Math.random() * 4; // y\r\n        positions[i + 2] += -2 + Math.random() * 4; // z\r\n      }\r\n      box.geometry.getAttribute(\"position\").needsUpdate = true;\r\n\r\n      particle.add(box);\r\n      this.particle = particle;\r\n    };\r\n\r\n    Particle.prototype.updateRotation = function () {\r\n      this.particle.rotation.x += this.vx;\r\n      this.particle.rotation.y += this.vy;\r\n    };\r\n\r\n    Particle.prototype.updatePosition = function () {\r\n      this.particle.position.lerp(this.particle.targetPosition, 0.1);\r\n    };\r\n\r\n    const updateParticles = () => {\r\n      for (let i = 0, l = particles.length; i < l; i++) {\r\n        particles[i].updateRotation();\r\n        particles[i].updatePosition();\r\n      }\r\n    };\r\n\r\n    const getGraphicPos = (pixel) => {\r\n      const posX = (pixel.x - graphicOffsetX - Math.random() * 4 - 2) * 3;\r\n      const posY = (pixel.y - graphicOffsetY - Math.random() * 4 - 2) * 3;\r\n      const posZ = -20 * Math.random() + 40;\r\n      return { x: posX, y: posY, z: posZ };\r\n    };\r\n\r\n    const setParticles = () => {\r\n      const maxParticles = 3000; // Change this to the desired number of particles\r\n\r\n      for (let i = 0; i < graphicPixels.length && i < maxParticles; i++) {\r\n        if (particles[i]) {\r\n          const pos = getGraphicPos(graphicPixels[i]);\r\n          particles[i].particle.targetPosition.x = pos.x;\r\n          particles[i].particle.targetPosition.y = pos.y;\r\n          particles[i].particle.targetPosition.z = pos.z;\r\n        } else {\r\n          const p = new Particle();\r\n          p.init(i);\r\n          scene.add(p.particle);\r\n          particles[i] = p;\r\n        }\r\n      }\r\n\r\n      for (let i = graphicPixels.length; i < particles.length; i++) {\r\n        randomPos(particles[i].particle.targetPosition, true);\r\n      }\r\n\r\n      console.log(\"Total Particles: \" + particles.length);\r\n    };\r\n\r\n    const randomPos = (vector, outFrame = false) => {\r\n      const radius = outFrame ? windowWidth * 2 : windowWidth * -2;\r\n      const centerX = 0;\r\n      const centerY = 0;\r\n      const r = windowWidth + radius * Math.random();\r\n      const angle = Math.random() * Math.PI * 2;\r\n      vector.x = centerX + r * Math.cos(angle);\r\n      vector.y = centerY + r * Math.sin(angle);\r\n      vector.z = Math.random() * windowWidth;\r\n    };\r\n\r\n    const updateGraphic = () => {\r\n      const img = graphics[currentGraphic];\r\n      gctx.drawImage(img, 0, 0, canvasWidth, canvasHeight);\r\n\r\n      const gData = gctx.getImageData(0, 0, canvasWidth, canvasHeight).data;\r\n      graphicPixels = [];\r\n\r\n      for (let i = gData.length; i >= 0; i -= 4) {\r\n        if (gData[i] === 0) {\r\n          const x = (i / 4) % canvasWidth;\r\n          const y = canvasHeight - Math.floor(Math.floor(i / canvasWidth) / 4);\r\n\r\n          if (x && x % 2 === 0 && y && y % 2 === 0) {\r\n            graphicPixels.push({\r\n              x: x,\r\n              y: y,\r\n            });\r\n          }\r\n        }\r\n      }\r\n\r\n      for (let i = 0; i < particles.length; i++) {\r\n        randomPos(particles[i].particle.targetPosition);\r\n      }\r\n\r\n      setTimeout(() => {\r\n        setParticles();\r\n      }, 500);\r\n    };\r\n\r\n    const initBgObjects = () => {\r\n      for (let i = 0; i < 40; i++) {\r\n        createBgObject(i);\r\n      }\r\n    };\r\n\r\n    const createBgObject = (i) => {\r\n      const geometry = new THREE.SphereGeometry(10, 6, 6);\r\n      const material = new THREE.MeshBasicMaterial({ color: 0xffffff });\r\n      const sphere = new THREE.Mesh(geometry, material);\r\n      scene.add(sphere);\r\n      const x = Math.random() * windowWidth * 2 - windowWidth;\r\n      const y = Math.random() * windowHeight * 2 - windowHeight;\r\n      const z = Math.random() * -2000 - 200;\r\n      sphere.position.set(x, y, z);\r\n    };\r\n\r\n    const initSlider = () => {\r\n      const elem = document.querySelector(\".intro-carousel\");\r\n\r\n      const flkty = new Flickity(elem, {\r\n        cellAlign: \"center\",\r\n        contain: true,\r\n        pageDots: false,\r\n        wrapAround: true,\r\n        resize: true,\r\n        arrowShape: {\r\n          x0: 10,\r\n          x1: 60,\r\n          y1: 50,\r\n          x2: 70,\r\n          y2: 40,\r\n          x3: 30,\r\n        },\r\n      });\r\n\r\n      const listener = () => {\r\n        currentGraphic = flkty.selectedIndex;\r\n        updateGraphic();\r\n        console.log(flkty.selectedIndex);\r\n      };\r\n\r\n      flkty.on(\"select\", listener);\r\n    };\r\n\r\n    const onMouseMove = (event) => {\r\n      mouseX = event.clientX - windowHalfWidth;\r\n      mouseY = event.clientY - windowHalfHeight;\r\n      cameraTarget.x = Number(-mouseX) / 2;\r\n      cameraTarget.y = mouseY / 2;\r\n    };\r\n\r\n    const onWindowResize = () => {\r\n      setWindowSize();\r\n      camera.aspect = windowWidth / windowHeight;\r\n      camera.updateProjectionMatrix();\r\n      renderer.setSize(windowWidth, windowHeight);\r\n    };\r\n\r\n    const setWindowSize = () => {\r\n      windowWidth = window.innerWidth;\r\n      windowHeight = window.innerHeight;\r\n      windowHalfWidth = windowWidth / 3;\r\n      windowHalfHeight = windowHeight / 2;\r\n    };\r\n\r\n    const animate = () => {\r\n      requestAnimationFrame(animate);\r\n      updateParticles();\r\n      camera.position.lerp(cameraTarget, 0.2);\r\n      camera.lookAt(cameraLookAt);\r\n      render();\r\n    };\r\n\r\n    const render = () => {\r\n      renderer.render(scene, camera);\r\n    };\r\n\r\n    const areAllImagesLoaded = () => {\r\n      const images = document.querySelectorAll(\".intro-cell > img\");\r\n      for (const img of images) {\r\n        if (!img.complete) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n\r\n    const initAll = () => {\r\n      initStage();\r\n      initScene();\r\n      initCanvas();\r\n      initCamera();\r\n      initSlider();\r\n      initBgObjects();\r\n      updateGraphic();\r\n      animate();\r\n      initParticles(); // 파티클 초기화 함수를 호출합니다.\r\n    };\r\n\r\n    if (areAllImagesLoaded()) {\r\n      initAll();\r\n    } else {\r\n      const images = document.querySelectorAll(\".intro-cell > img\");\r\n      let loadedImagesCount = 0;\r\n\r\n      images.forEach((img) => {\r\n        img.addEventListener(\"load\", () => {\r\n          loadedImagesCount++;\r\n          if (loadedImagesCount === images.length) {\r\n            initAll();\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      // 이전에 생성된 파티클을 제거합니다.\r\n      for (let i = 0; i < particles.length; i++) {\r\n        scene.remove(particles[i].particle);\r\n      }\r\n      particles = [];\r\n      window.removeEventListener(\"resize\", onWindowResize);\r\n      window.removeEventListener(\"mousemove\", onMouseMove);\r\n    };\r\n  }, []);\r\n\r\n  //modal\r\n  const [isVerifyModalOpen, setIsVerifyModalOpen] = useState(false); // 모달 열림 여부 상태\r\n  const [isModalOpen, setIsModalOpen] = useRecoilState(modalOpenState);\r\n\r\n  //navigation\r\n  const navigateAbout = () => {\r\n    navigate(\"/landing\");\r\n  };\r\n\r\n  const navigateLuck = () => {\r\n    if (isLogin === \"true\") {\r\n      navigate(\"/userluck\");\r\n    } else {\r\n      toast.info(\"비로그인 시 카드 저장 불가\");\r\n      setTimeout(() => {\r\n        navigate(\"/luck\");\r\n      }, 2000);\r\n    }\r\n  };\r\n\r\n  const navigateAboutStory = () => {\r\n    navigate(\"/aboutStory\");\r\n  };\r\n\r\n  const navigateSpend = () => {\r\n    if (isLogin === \"true\") {\r\n      navigate(\"/spend\");\r\n    } else {\r\n      toast.info(\"비로그인 시 가계부 저장 불가\");\r\n      setTimeout(() => {\r\n        navigate(\"/spend\");\r\n      }, 2000);\r\n    }\r\n  };\r\n\r\n  const navigateTarot = () => {\r\n    navigate(\"/tarot\");\r\n  };\r\n\r\n  const navigateMain = () => {\r\n    navigate(\"/\");\r\n  };\r\n\r\n  //modal\r\n  const openVerifyModal = () => {\r\n    setIsVerifyModalOpen(true);\r\n  };\r\n\r\n  const closeVerifyModal = () => {\r\n    setIsVerifyModalOpen(false);\r\n  };\r\n\r\n  // 로그인 정보 가져오기\r\n  const { data, error, isLoading } = useUserInfo();\r\n\r\n  useEffect(() => {\r\n    if (data) {\r\n      if (data.isAuthenticated) {\r\n        setIsLogin(\"true\");\r\n        setIsAuth(true);\r\n      } else {\r\n        setIsLogin(\"false\");\r\n        setIsAuth(false);\r\n      }\r\n    }\r\n  }, [data]);\r\n\r\n  //파티클\r\n  const [part, setPart] = useState(\"\");\r\n  useEffect(() => {\r\n    setPart(particles);\r\n  }, [particles]);\r\n\r\n  //Verify\r\n\r\n  return (\r\n    <div>\r\n      <canvas ref={canvasRef}></canvas>\r\n      <div id=\"main\">\r\n        <section className=\"intro-section\">\r\n          <div className=\"intro-carousel\">\r\n            <div className=\"intro-cell\">\r\n              <img src={money} alt=\"money\" />\r\n            </div>\r\n            <div className=\"intro-cell\">\r\n              <img src={dictionary} alt=\"dictionary\" />\r\n            </div>\r\n            <div className=\"intro-cell\">\r\n              <img src={masooriStory} alt=\"masooriStory\" />\r\n            </div>\r\n            <div className=\"intro-cell\">\r\n              <img src={spendtarot} alt=\"spendtarot\" />\r\n            </div>\r\n          </div>\r\n        </section>\r\n        <section className=\"home-section\">\r\n          <div className=\"home-menu\">\r\n            <button onClick={navigateAbout} className=\"home-menu-button\">\r\n              정보\r\n            </button>\r\n            <button onClick={navigateAboutStory} className=\"home-menu-button\">\r\n              마수리 이야기\r\n            </button>\r\n            <button onClick={navigateLuck} className=\"home-menu-button\">\r\n              카드 읽기\r\n            </button>\r\n            <button onClick={navigateSpend} className=\"home-menu-button\">\r\n              가계부 기록\r\n            </button>\r\n            <button onClick={navigateTarot} className=\"home-menu-button\">\r\n              타로\r\n            </button>\r\n            <button onClick={navigateMain} className=\"home-menu-button\">\r\n              홈\r\n            </button>\r\n          </div>\r\n        </section>\r\n        <section className=\"home-menu2\">\r\n          <div className=\"home-menu\">\r\n            <button onClick={openVerifyModal} className=\"home-menu-button\">\r\n              본인 인증하기\r\n            </button>\r\n          </div>\r\n        </section>\r\n      </div>\r\n      <Backdrop isOpen={isVerifyModalOpen} />\r\n      <ModalContainer isOpen={isVerifyModalOpen}>\r\n        <VerifyNumberModal onClose={closeVerifyModal} />\r\n      </ModalContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MainPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}